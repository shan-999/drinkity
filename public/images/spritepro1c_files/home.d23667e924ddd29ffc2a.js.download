"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5177],{4628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SubScreenType=t.ScreenType=void 0,t.ScreenType={Homepage:"Homepage",LandingPage:"Landing Page",PrintPreview:"Print Preview Page",Cart:"Cart",Slp:"Search Page",Profile:"Profile",None:"None",Widgetized:"Layout",Pdp:"Product Page",OrderHistory:"Order History",OrderDetails:"Order Details",OrderTrack:"Order Track"},t.SubScreenType={}},60730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={NONE:"NONE",AUTO:"AUTO",MANUAL:"MANUAL"}},12007:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,function(e){e.NONE="NONE",e.AUTO="AUTO",e.MANUAL="MANUAL"}(r||(r={}));var n=r;t.default=n},54530:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trackScreenVisit=void 0;var n,a=r(7095),i=r(24095),s=r(90254),l=(n=r(80857))&&n.__esModule?n:{default:n};t.trackScreenVisit=(e,t)=>()=>{var r=(0,a.getAnalyticsConfigurationFromStore)();if((0,s.updateScreenAttributes)(e,t,void 0),t&&t.name){new i.ScreenEvent(e,t).publish(r);var n=l.default.navigationStack;n&&(n[n.length-1].pageVisitTracked=!0)}}},24095:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenEvent=void 0;var n=r(19309),a=r(64805),i=r(39446),s=r(90254);class l extends n.BaseAnalyticsEvent{constructor(e,t){super(a.AnalyticsPlan.SCREEN,t.name||i.ScreenType.None),this.pageMeta=void 0,this.screenUniqueId=void 0,this.pageMeta=t,this.screenUniqueId=e}publishWithDestinations(e){(0,s.screen)(this.eventName,Array.from(e.values()),this.getScreenVisitAttributes(),null)}getScreenVisitAttributes(){var e={};if(this.pageMeta){e={[a.AnalyticsKey.PAGE_VISIT_ID]:this.screenUniqueId,[a.AnalyticsKey.PAGE_ID]:this.pageMeta.id,[a.AnalyticsKey.PAGE_LAYOUT_ID]:this.pageMeta.layout_id,[a.AnalyticsKey.PAGE_NAME]:this.pageMeta.name,[a.AnalyticsKey.PAGE_TITLE]:this.pageMeta.title,[a.AnalyticsKey.PAGE_VARIATION_ID]:this.pageMeta.variation_id,[a.AnalyticsKey.PAGE_REVISION_ID]:this.pageMeta.revision_id};var t=this.pageMeta.custom_data;t&&Object.assign(e,t)}return e}}t.ScreenEvent=l},6600:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=r(27378))&&n.__esModule?n:{default:n};t.default=function(e){var t=e.onClick;return a.default.createElement("div",{className:"error-container-widget"},a.default.createElement("div",{className:"heading"},"Oops! something went wrong"),a.default.createElement("br",null),a.default.createElement("div",{className:"button",onClick:t},"Try Again"))}},96401:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Virtualizer",{enumerable:!0,get:function(){return n.Virtualizer}}),Object.defineProperty(t,"WindowVirtualizer",{enumerable:!0,get:function(){return n.WindowVirtualizer}});var n=r(26242)},26242:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WindowVirtualizer=t.Virtualizer=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(n,s,l):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}(r(27378)),a=r(95843);function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.Virtualizer=e=>{var t=e.count,r=e.estimateSize,i=e.overscan,s=e.paddingEnd,l=e.listHeight,o=e.renderComponent,c=(0,n.useRef)(null),u=(0,a.useVirtualizer)({count:t,estimateSize:e=>r||500,getScrollElement:()=>c.current,overscan:i||0,paddingEnd:s||0});return n.createElement("div",{ref:c,style:{height:l||"100vh",overflow:"auto"},className:"virtual-list"},n.createElement("div",{style:{height:u.getTotalSize()+"px",width:"100%",position:"relative"}},u.getVirtualItems().map((e=>n.createElement("div",{key:e.index,"data-index":e.index,ref:u.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY("+e.start+"px)"}},o(e))))))},t.WindowVirtualizer=e=>{var t=e.count,r=e.estimateSize,i=e.overscan,s=e.paddingEnd,l=e.renderComponent,o=(0,n.useRef)(null),c=(0,n.useRef)(0),u=(0,a.useWindowVirtualizer)({count:t,estimateSize:e=>r||500,scrollMargin:c.current,overscan:i||0,paddingEnd:s||0}),d=u.getVirtualItems();return(0,n.useLayoutEffect)((()=>{var e,t;c.current=null!=(e=null==(t=o.current)?void 0:t.offsetTop)?e:0}),[]),n.createElement("div",{ref:o,className:"list"},n.createElement("div",{style:{height:u.getTotalSize()+"px",width:"100%",position:"relative"}},n.createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:"translateY("+(d[0].start-u.options.scrollMargin)+"px)"}},u.getVirtualItems().map((e=>n.createElement("div",{key:e.index,"data-index":e.index,ref:u.measureElement},l(e)))))))}},49249:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setScreenInView=t.setScreenNotInView=t.setWidgetsInView=void 0;var n=r(1095);t.setWidgetsInView=e=>({type:n.SET_WIDGETS_IN_VIEW,payload:e}),t.setScreenNotInView=e=>({type:n.UNSET_WIDGETS_IN_VIEW,payload:e}),t.setScreenInView=e=>({type:n.SET_SCREEN_IN_VIEW,payload:e})},1095:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SET_SCREEN_IN_VIEW=t.UNSET_WIDGETS_IN_VIEW=t.SET_WIDGETS_IN_VIEW=void 0,t.SET_WIDGETS_IN_VIEW="set_widgets_in_view",t.UNSET_WIDGETS_IN_VIEW="unset_widgits_in_view",t.SET_SCREEN_IN_VIEW="set_screen_in_view"},74680:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(27378)),a=l(r(55839)),i=r(45106),s=r(77836);function l(e){return e&&e.__esModule?e:{default:e}}t.default=e=>t=>{var r=(0,i.compose)((0,s.ScreenIdProvider)(e))((e=>n.default.createElement(t,e)));return(0,a.default)(r,t),r}},34290:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=y(r(27378)),a=r(45106),i=y(r(55839)),s=r(54530),l=r(51739),o=r(49249),c=y(r(12007)),u=r(77897),d=r(90386),f=r(74319),p=y(r(48159)),v=y(r(80857)),g=r(90254),h=r(89966);function y(e){return e&&e.__esModule?e:{default:e}}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}var S=["setScreenInView","setScreenNotInView","removeScreenAnalyticsState","initializeScreenAnalytics","isAPISuccess","pageMeta"];t.default=(e,t,r)=>y=>{class _ extends n.default.Component{constructor(e){super(e),this.updateScreenAttributes=()=>{var e=r?r(this.props):null;g.updateScreenAttributes&&(0,g.updateScreenAttributes)(this.props.screenId,d.PageMetaUtils.getFinalPageMeta(t(this.props),this.props.pageMeta,e),void 0)},this.trackScreenVisit=this.trackScreenVisit.bind(this)}trackScreenVisit(n){var a=r?r(this.props):null,i=v.default.navigationStack;if(i){var s=i[i.length-1];!s||s.pageVisitTracked&&!n||e()===c.default.NONE||this.props.trackScreenVisit(this.props.screenId,d.PageMetaUtils.getFinalPageMeta(t(this.props),this.props.pageMeta,a))}}componentDidMount(){e()===c.default.AUTO&&this.trackScreenVisit(),this.props.initializeScreenAnalytics(this.props.screenId),this.props.setScreenInView(this.props.screenId),this.updateScreenAttributes()}componentDidUpdate(){this.props.isAPISuccess&&(e()===c.default.MANUAL&&this.trackScreenVisit(),this.updateScreenAttributes())}componentWillUnmount(){this.props.removeScreenAnalyticsState(this.props.screenId),this.props.setScreenNotInView(this.props.screenId)}render(){return n.default.createElement(y,m({},(0,p.default)(this.props,S),{trackScreenVisit:this.trackScreenVisit}))}}var E=(0,a.compose)((0,u.connect)(((e,t)=>{var r=t.screenId;return{isAPISuccess:(0,f.getIsAPISuccess)(e,r),pageMeta:(0,h.getPageMeta)(e,r)}}),{trackScreenVisit:s.trackScreenVisit,setScreenInView:o.setScreenInView,setScreenNotInView:o.setScreenNotInView,removeScreenAnalyticsState:l.removeScreenAnalyticsState,initializeScreenAnalytics:l.initializeScreenAnalytics}))(_);return(0,i.default)(E,y),E}},74319:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIsAPISuccess=void 0,t.getIsAPISuccess=(e,t)=>{var r=e.api;return!!r[t]&&r[t].isAPISuccess}},77836:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenIdProvider=t.ScreenContext=void 0;var n=c(r(27378)),a=c(r(55839)),i=r(49249),s=r(45106),l=r(77897),o=c(r(80857));function c(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}var d=n.default.createContext({screenId:"",screenDeeplink:""});t.ScreenContext=d;var f={setScreenInView:i.setScreenInView};t.ScreenIdProvider=e=>t=>{class r extends n.default.Component{constructor(){super(...arguments),this.state={screenId:""}}static getDerivedStateFromProps(){var t=o.default.navigationStack,r=t[t.length-1];return r?{screenId:e?r.key.toString()+"-modal":r.key.toString()}:null}componentWillUnmount(){var t=o.default.navigationStack;e&&null!=t&&t.length&&this.props.setScreenInView(t[t.length-1].key.toString())}render(){return n.default.createElement(d.Provider,{value:{screenId:this.state.screenId}},n.default.createElement(t,u({},this.props,{screenId:this.state.screenId})))}}return(0,a.default)(r,t),(0,s.compose)((0,l.connect)(null,f))(r)}},84540:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(27378)),a=r(77897),i=r(45106),s=_(r(47892)),l=r(64808),o=r(4628),c=_(r(60730)),u=r(2185),d=_(r(6600)),f=_(r(74680)),p=_(r(34290)),v=r(38371),g=_(r(18849)),h=_(r(77082)),y=r(37398),m=r(80008),S=r(80421);function _(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}var I=e=>{var t,r=(0,a.useDispatch)(),i=(0,n.useRef)(!0),s=(0,n.useState)(!1),o=s[0],c=s[1],f=(0,a.useSelector)((e=>e.ui.feed.data)),p=(0,a.useSelector)((e=>!!e.data.auth.accessToken)),v=(0,a.useSelector)((e=>e.data.location.coords.lat)),y=(0,a.useSelector)((e=>e.data.location.coords.lon)),m=e=>{window.scrollTo(0,0),f||r((0,S.setFeedWidgets)(e))},_=()=>{c(!0)},E=()=>{c(!1),r((0,S.resetFeed)());var t={url:u.API.FEED,method:u.Method.GET};r((0,S.fetchAPIPrimary)(e.screenId,t,m,_))};return(0,n.useEffect)((()=>{i.current?i.current=!1:E()}),[v,y,p]),(0,n.useEffect)((()=>{f||E()}),[f]),o?n.default.createElement(P,null,n.default.createElement(d.default,{onClick:()=>E()})):null!=f&&null!=(t=f.widgets)&&t.length?n.default.createElement(n.default.Fragment,null,n.default.createElement(w,null,n.default.createElement(h.default,{widgetModels:f.widgets,containerId:l.ContainerIds.FEED_CONTAINER,parentScreenId:e.screenId}))):n.default.createElement(b,null,n.default.createElement(g.default,{spin:!0}))},b=s.default.div.withConfig({displayName:"Feed__LoaderContainer",componentId:"sc-1yhjzxr-0"})(["left:0;right:0;height:calc(100vh - ","px);position:relative;top:","px;padding-bottom:","px;justify-content:center;align-items:center;display:flex;"],v.HeaderDesktopHeight,v.HeaderDesktopHeight,v.HeaderDesktopHeight),P=s.default.div.withConfig({displayName:"Feed__ErrorWrapper",componentId:"sc-1yhjzxr-1"})(["background-color:#ffffff;justify-content:center;align-items:center;display:flex;position:relative;min-height:calc(100vh - ","px);@media ","{height:100%;}"],v.HeaderDesktopHeight,y.device.mobile),w=s.default.div.withConfig({displayName:"Feed__Container",componentId:"sc-1yhjzxr-2"})(["background-color:#ffffff;height:100%;position:relative;@media ","{align-items:center;justify-content:center;display:flex;flex-direction:column;}"],y.device.desktop),O=(0,i.compose)((0,f.default)(),(0,p.default)((()=>c.default.MANUAL),(()=>o.ScreenType.Homepage),(()=>null)))((e=>{var t=(0,a.useSelector)((e=>e.data.ua.isMobile));return(0,a.useSelector)((e=>e.data.featureFlags.is_consumer_web_bff_enabled))&&t?n.default.createElement(m.BffFeed,e):n.default.createElement(I,e)}));t.default=O},80008:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BffFeed=void 0;var n=r(31867),a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(27378)),i=r(77897),s=y(r(47892)),l=y(r(6600)),o=y(r(63431)),c=r(38371),u=r(37398),d=y(r(18849)),f=r(1773),p=r(80421),v=r(96401),g=r(51345),h=r(94964);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function _(e){var t=e.dispatch,r=e.setIsApiError,n=(0,i.useSelector)((e=>e.ui.feed.bffData));return a.default.createElement(E,{dispatch:t,setIsApiError:r,bffFeedData:n})}function E(e){var t=e.dispatch,r=e.setIsApiError,s=e.bffFeedData;if(!s)return null;var l=(0,i.useSelector)((e=>e.ui.feed.isHomePageVisited));(0,a.useEffect)((()=>(s&&(null!=s&&s.tracking&&t((0,h.bffPageTracking)(null==s?void 0:s.tracking,!l)),t((0,p.setHomePageVisited)())),()=>{t((0,h.setBffPageAttributes)(null==s?void 0:s.tracking))})),[s]);var c=s.layout_config,u=s.snippets,f=s.pagination,g=(0,a.useRef)(null),y=(0,o.default)(g,{freezeOnceVisible:!1}),m=(null==y?void 0:y.isIntersecting)||null,_=(0,i.useSelector)((e=>e.ui.feed.isBffLoading)),E=null;f&&(E=f.next_url);var b=(0,a.useCallback)((e=>{e.snippets&&t((0,p.setBffFeed)(Object.assign({},e,{snippets:[...u,...e.snippets]})))}),[E]),P=()=>{window.scrollTo(0,0),r(!0)},w=(0,a.useCallback)((()=>{r(!1),t((0,p.setBffFeedLoading)()),t((0,p.fetchBffFeedPrimary)({onSuccess:b,onFailure:P,url:E}))}),[E]);return(0,a.useEffect)((()=>{m&&E&&w()}),[m]),a.default.createElement(I,{layoutConfig:c},a.default.createElement(v.WindowVirtualizer,{count:u.length,estimateSize:500,overscan:10,renderComponent:e=>a.default.createElement(n.SnippetRenderer,S({key:""+u[e.index].widget_type+e.index},u[e.index]))}),a.default.createElement("div",{ref:g},_&&a.default.createElement("div",{style:{margin:"50px auto",width:"fit-content"}},a.default.createElement(d.default,{spin:!0,bestPos:!0,isSmall:!0}))))}function I(e){var t=e.layoutConfig,r=e.children;return a.default.createElement("div",{style:{background:t.bg_color_hex}},r)}t.BffFeed=e=>{var t=(0,i.useDispatch)(),r=(0,a.useState)(!1),s=r[0],o=r[1],c=(0,a.useState)(!1),u=c[0],v=c[1],h=(0,i.useSelector)((e=>!!e.data.auth.accessToken)),y=(0,i.useSelector)((e=>e.data.location.coords.lat)),m=(0,i.useSelector)((e=>e.data.location.coords.lon)),S=(0,i.useSelector)((e=>e.ui.feed.isHomePageVisited)),E=(0,a.useRef)(!0),I=(0,i.useSelector)((e=>e.ui.feed.initialRender)),O=(0,g.useTrackingDispatcher)(),A=(0,a.useCallback)((e=>{window.scrollTo(0,0),v(!1),t((0,p.setBffFeed)(e))}),[S]),M=()=>{v(!1),o(!0)},k=(0,a.useCallback)((()=>{o(!1),v(!0),t((0,p.fetchBffFeedPrimary)({onSuccess:A,onFailure:M,url:"/v1/layout/feed"}))}),[]);return(0,a.useEffect)((()=>{E.current?E.current=!1:k()}),[y,m,h]),(0,a.useEffect)((()=>{I&&(k(),t((0,p.setInitialRenderToFalse)()))}),[I]),s?a.default.createElement(b,null,a.default.createElement(l.default,{onClick:()=>k()})):u?a.default.createElement(P,null,a.default.createElement("div",{style:{position:"absolute",right:"50%",top:"50%",transform:"translate(50%, -50%)"}},a.default.createElement("div",null,a.default.createElement(d.default,{spin:!0,bestPos:!0})))):a.default.createElement(n.SnippetsWrapper,{reducer:(0,f.bffReducer)(t),trackingDispatcher:O},a.default.createElement(w,null,a.default.createElement(_,{dispatch:t,setIsApiError:o})))};var b=s.default.div.withConfig({displayName:"bff-feed__ErrorWrapper",componentId:"sc-11j62j0-0"})(["background-color:#ffffff;justify-content:center;align-items:center;display:flex;position:relative;min-height:calc(100vh - ","px);@media ","{height:100%;}"],c.HeaderDesktopHeight,u.device.mobile),P=(0,s.default)("div").withConfig({displayName:"bff-feed___StyledDiv",componentId:"sc-11j62j0-1"})(["min-height:100lvh;min-height:100vh;"]),w=(0,s.default)("div").withConfig({displayName:"bff-feed___StyledDiv2",componentId:"sc-11j62j0-2"})(["min-height:100lvh;min-height:100vh;"])},56426:(e,t,r)=>{Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return a.default}});var n,a=(n=r(84540))&&n.__esModule?n:{default:n}},38371:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogoWidth=t.HeaderDesktopHeight=void 0,t.HeaderDesktopHeight=86,t.LogoWidth=178}}]);
//# sourceMappingURL=home.d23667e924ddd29ffc2a.js.map