
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Drinkity</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/style/user/home/vendor.css">
    <link rel="stylesheet" type="text/css" href="/style/user/home.css">
    <link rel="stylesheet" href="/style/user/add-address.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Open+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style/user/landig-header.css">

  </head>`
<body class="animsition">
	
	<!-- Header -->
	

    <header>
    	<%- include('partial/head') %>
	</header>



    <main class="container my-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">

                <h2 class="mb-4">Edit new address</h2>
                <form action="/edit-address/<%= address._id %>" method="POST" class="shadow-sm p-4 bg-white" onsubmit="submitValidation(event)">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="fullName" class="form-label">Full name <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="fullName" name="fullName" value="<%= address ? address.fullName : '' %>" onkeyup="validatename()">
                            <span id="nameError" style="color: red;"></span>
                        </div>
                        <div class="mb-3">
                            <label for="address" class="form-label">House / apartment number and street address <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="address" name="address" value="<%= address ? address.address : '' %>" onkeyup="validateAddress()">
                            <span id="addressError" style="color: red;"></span>
                        </div>
                    </div>
                
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="email" class="form-label">Email address <span class="text-danger">*</span></label>
                            <input type="email" class="form-control" id="email" name="email" value="<%= address ? address.email : '' %>" onkeyup="validateEmail()">
                            <span id="emailError" style="color: red;"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="mobile" class="form-label">Mobile number</label>
                            <input type="text" class="form-control" id="mobile" name="mobile" value="<%= address ? address.phonNumber : '' %>" onkeyup="validateMobile()">
                            <span id="mobileError" style="color: red;"></span>
                        </div>
                    </div>
                
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="city" class="form-label">City <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="city" name="city" value="<%= address ? address.city : '' %>" onkeyup="validateCity()">
                            <span id="cityError" style="color: red;"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="postcode" class="form-label">Postcode <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="postcode" name="pincode" value="<%= address ? address.PINCode : '' %>" onkeyup="validatePostcode()">
                            <span id="postcodeError" style="color: red;"></span>
                        </div>
                    </div>
                
                    <div class="mb-3">
                        <label for="state" class="form-label">State<span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="state" name="state" value="<%= address ? address.state : '' %>" onkeyup="validateState()">
                        <span id="stateError" style="color: red;"></span>
                    </div>
                    
                    <div class="mb-3">
                        <label for="landmark" class="form-label">Add Nearby Famous Shop/Mall/Landmark<span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="landmark" name="landmark" value="<%= address ? address.landmark : '' %>" onkeyup="validateLandmark()">
                        <span id="landmarkError" style="color: red;"></span>
                    </div>
                
                    <button type="submit" class="btn btn-primary w-100">Update Address</button>
                </form>
                
            </div>
        </div>
    </main>


    <br><br>



    <footer><%- include('partial/footer') %> </footer>




    <script src="/script/user/home.js/jquery-1.11.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script src="/script/user/home.js/plugins.js"></script>
    <script src="/script/user/home.js/script.js"></script>



    <script> 


        function validatename() {
            let fullName = document.getElementById('fullName').value;
            let regex = /^[A-Za-z\s]+$/; 

            if (fullName.trim() === "") {
                document.getElementById('nameError').innerHTML = 'Name cannot be empty.';
                return false;
            }

            if (!regex.test(fullName)) {
                document.getElementById('nameError').innerHTML = 'Invalid name. Please use only letters and spaces.';
                return false;
            }

            document.getElementById('nameError').innerHTML = '';
            return true;
        }


        function validateAddress() {
            let address = document.getElementById('address').value;

            if (address.trim() === "") {
                document.getElementById('addressError').innerHTML = 'Address cannot be empty.';
                return false;
            }

            document.getElementById('addressError').innerHTML = '';
            return true;
        }

        function validateEmail() {
            let email = document.getElementById('email').value;
            let regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (email.trim() === "") {
                document.getElementById('emailError').innerHTML = 'Email cannot be empty.';
                return false;
            }

            if (!regex.test(email)) {
                document.getElementById('emailError').innerHTML = 'Invalid email format.';
                return false;
            }

            document.getElementById('emailError').innerHTML = '';
            return true;
        }

        function validateMobile() {
            let mobile = document.getElementById('mobile').value;
            let regex = /^\d{10}$/;

            if (mobile && !regex.test(mobile)) {
                document.getElementById('mobileError').innerHTML = 'Invalid mobile number. It should be 10 digits.';
                return false;
            }

            document.getElementById('mobileError').innerHTML = '';
            return true;
        }

        function validateCity() {
            let city = document.getElementById('city').value;

            if (city.trim() === "") {
                document.getElementById('cityError').innerHTML = 'City cannot be empty.';
                return false;
            }

            document.getElementById('cityError').innerHTML = '';
            return true;
        }

        function validatePostcode() {
            let postcode = document.getElementById('postcode').value;

            if (postcode.trim() === "") {
                document.getElementById('postcodeError').innerHTML = 'Postcode cannot be empty.';
                return false;
            }

            document.getElementById('postcodeError').innerHTML = '';
            return true;
        }

        function validateState() {
            let state = document.getElementById('state').value;

            if (state.trim() === "") {
                document.getElementById('stateError').innerHTML = 'State cannot be empty.';
                return false;
            }

            document.getElementById('stateError').innerHTML = '';
            return true;
        }

        function validateLandmark() {
            let landmark = document.getElementById('landmark').value;

            if (landmark.trim() === "") {
                document.getElementById('landmarkError').innerHTML = 'Landmark cannot be empty.';
                return false;
            }

            document.getElementById('landmarkError').innerHTML = '';
            return true;
        }

        function submitValidation(event) {
            let name = validatename();
            let address = validateAddress();
            let email = validateEmail();
            let mobile = validateMobile();
            let city = validateCity();
            let postcode = validatePostcode();
            let state = validateState();
            let landmark = validateLandmark();

            if (!name || !address || !email || !mobile || !city || !postcode || !state || !landmark) {
                event.preventDefault();
            }
        }
    </script>
  </body>
</html>